!function(){angular.module("ngMaterial.components.templates",[]).run(["$templateCache",function(e){e.put("date-picker/date-picker-dialog.html",'<md-dialog class="mdc-date-picker" style="max-width: 90%; max-height: 90%">\r\n    <!-- Date picker -->\r\n    <div md-theme="{{mdTheme}}">\r\n      <!-- Current day of week -->\r\n      <md-toolbar class="md-hue-2 mdc-date-picker__current-day-of-week">\r\n        <span>{{ selected.date | date: \'EEEE\' }}</span>\r\n      </md-toolbar>\r\n\r\n      <!-- Current date -->\r\n      <md-toolbar class="mdc-date-picker__current-date">\r\n        <span>{{ selected.date | date : \'MMMM\' }}</span>\r\n        <strong>{{ selected.date | date: \'dd\' }}</strong>\r\n        <a ng-click="displayYearSelection()">{{ selected.date | date: \'yyyy\' }}</a>\r\n      </md-toolbar>\r\n\r\n      <!-- Calendar -->\r\n      <div class="mdc-date-picker__calendar" ng-if="!yearSelection">\r\n        <div class="mdc-date-picker__nav">\r\n          <md-button class="md-fab md-primary" aria-label="Previous month" ng-click="previousMonth()">\r\n            <i class="mdi mdi-chevron-left"></i>\r\n          </md-button>\r\n\r\n          <span>{{ activeDate.format(\'MMMM YYYY\') }}</span>\r\n\r\n          <md-button class="md-fab md-primary" arial-label="Next month" ng-click="nextMonth()">\r\n            <i class="mdi mdi-chevron-right"></i>\r\n          </md-button>\r\n        </div>\r\n\r\n        <div class="mdc-date-picker__days-of-week">\r\n          <span ng-repeat="day in daysOfWeek">{{ day }}</span>\r\n        </div>\r\n\r\n        <div class="mdc-date-picker__days">\r\n                    <span class="mdc-date-picker__day mdc-date-picker__day--is-empty"\r\n                          ng-repeat="x in emptyFirstDays">&nbsp;</span><!--\r\n\r\n                 --><div class="mdc-date-picker__day"\r\n                         ng-class="{ \'mdc-date-picker__day--is-selected\': day.selected,\r\n                                     \'mdc-date-picker__day--is-today\': day.today }"\r\n                         ng-repeat="day in days">\r\n          <a ng-click="select(day)">{{ day ? day.format(\'D\') : \'\' }}</a>\r\n        </div><!--\r\n\r\n                 --><span class="mdc-date-picker__day mdc-date-picker__day--is-empty"\r\n                          ng-repeat="x in emptyLastDays">&nbsp;</span>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Year selection -->\r\n      <div class="mdc-date-picker__year-selector" ng-show="yearSelection">\r\n        <a class="mdc-date-picker__year"\r\n           ng-class="{ \'mdc-date-picker__year--is-active\': year == activeDate.format(\'YYYY\') }"\r\n           ng-repeat="year in years"\r\n           ng-click="selectYear(year)"\r\n           ng-if="yearSelection">\r\n          <span>{{year}}</span>\r\n        </a>\r\n      </div>\r\n\r\n      <!-- Actions -->\r\n      <div class="md-actions mdc-date-picker__actions" layout="row" layout-align="end">\r\n        <md-button class="md-primary" ng-click="cancel()">Cancel</md-button>\r\n        <md-button class="md-primary" ng-click="closePicker()">Ok</md-button>\r\n      </div>\r\n    </div>\r\n</md-dialog>\r\n'),e.put("date-picker/date-picker-input.html",'<md-input-container ng-click="openPicker($event)">\r\n  <label>{{label}}</label>\r\n  <input type="text" ng-model="selected.model" ng-disabled="true" ng-click="openPicker($event)">\r\n</md-input-container>\r\n')}])}(),function(){"use strict";angular.module("ngMaterial.components.datePicker",["ngMaterial"]).controller("mdcDatePickerController",["$scope","$timeout","$mdDialog","$filter","$document","$locale","date","locale","mdTheme",function(e,a,t,n,r,d,c,l,i){function o(e){return e?e:(null!==navigator.language?navigator.language:navigator.browserLanguage).split("_")[0].split("-")[0]||"en"}function s(){var a=[],t=angular.copy(e.activeDate).date(0),n=angular.copy(e.activeDate).date(1),r=angular.copy(n).endOf("month"),d=angular.copy(r).date();e.emptyFirstDays=[];for(var c=n.day();c>0;c--)e.emptyFirstDays.push({});for(var l=0;d>l;l++){var i=angular.copy(t.add(1,"days"));i.selected=angular.isDefined(e.selected.model)&&i.isSame(e.selected.date,"day"),i.today=i.isSame(moment(),"day"),a.push(i)}e.emptyLastDays=[];for(var o=7-(0===r.day()?7:r.day());o>0;o--)e.emptyLastDays.push({});e.days=a}e.myLocale=d,e.model=c,e.mdTheme=i?i:"default";var m;this.build=function(a){m=a,moment.locale(m),angular.isDefined(e.model)?(e.selected={model:moment(e.model),date:e.model},e.activeDate=moment(e.model)):(e.selected={model:void 0,date:new Date},e.activeDate=moment()),e.moment=moment,e.days=[],e.daysOfWeek=[e.myLocale.DATETIME_FORMATS.SHORTDAY[0],e.myLocale.DATETIME_FORMATS.SHORTDAY[1],e.myLocale.DATETIME_FORMATS.SHORTDAY[2],e.myLocale.DATETIME_FORMATS.SHORTDAY[3],e.myLocale.DATETIME_FORMATS.SHORTDAY[4],e.myLocale.DATETIME_FORMATS.SHORTDAY[5],e.myLocale.DATETIME_FORMATS.SHORTDAY[6]],e.years=[];for(var t=moment().year()-100;t<=moment().year()+100;t++)e.years.push(t);s()},this.build(o(l)),e.previousMonth=function(){e.activeDate=e.activeDate.subtract(1,"month"),s()},e.nextMonth=function(){e.activeDate=e.activeDate.add(1,"month"),s()},e.select=function(a){e.selected={model:a.toDate(),date:a.toDate()},e.model=a.toDate(),s()},e.selectYear=function(a){e.yearSelection=!1,e.selected.model=moment(e.selected.date).year(a).toDate(),e.selected.date=moment(e.selected.date).year(a).toDate(),e.model=moment(e.selected.date).toDate(),e.activeDate=e.activeDate.add(a-e.activeDate.year(),"year"),s()},e.displayYearSelection=function(){var t=r[0].getElementsByClassName("mdc-date-picker__calendar")[0].offsetHeight,n=r[0].getElementsByClassName("mdc-date-picker__year-selector")[0];n.style.height=t+"px",e.yearSelection=!0,a(function(){var e=r[0].getElementsByClassName("mdc-date-picker__year--is-active")[0];n.scrollTop=n.scrollTop+e.offsetTop-n.offsetHeight/2+e.offsetHeight/2})},e.cancel=function(){t.hide()},e.closePicker=function(){t.hide(e.selected)}}]).controller("mdcDatePickerInputController",function(e,a,t,n,r){e.selected=angular.isDefined(e.model)?{model:moment(e.model),date:e.model}:{model:void 0,date:new Date};var d="mediumDate";angular.isDefined(a.dataDateFormat)&&(d=a.dataDateFormat),e.openPicker=function(t){e.yearSelection=!1,r.show({targetEvent:t,templateUrl:"date-picker/date-picker-dialog.html",controller:"mdcDatePickerController",locals:{date:e.selected.date,locale:a.locale,mdTheme:a.dialogMdTheme}}).then(function(a){a&&(e.selected.model=n("date")(a.date,d),e.selected.date=a.date,e.model=a.model)})}}).directive("mdcDatePicker",function(){return{restrict:"AE",controller:"mdcDatePickerInputController",scope:{model:"=",label:"@"},templateUrl:"date-picker/date-picker-input.html"}})}(),function(){"use strict";angular.module("ngMaterial.components",["ngMaterial","ngMaterial.components.templates","ngMaterial.components.datePicker"])}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi50bXAvdGVtcGxhdGVzL3RlbXBsYXRlcy5qcyIsInNyYy9kYXRlLXBpY2tlci9kYXRlLXBpY2tlci5qcyIsInNyYy9jb21wb25lbnRzLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJydW4iLCIkdGVtcGxhdGVDYWNoZSIsInB1dCIsImNvbnRyb2xsZXIiLCIkc2NvcGUiLCIkdGltZW91dCIsIiRtZERpYWxvZyIsIiRmaWx0ZXIiLCIkZG9jdW1lbnQiLCIkbG9jYWxlIiwiZGF0ZSIsImxvY2FsZSIsIm1kVGhlbWUiLCJjaGVja0xvY2FsZSIsIm5hdmlnYXRvciIsImxhbmd1YWdlIiwiYnJvd3Nlckxhbmd1YWdlIiwic3BsaXQiLCJnZW5lcmF0ZUNhbGVuZGFyIiwiZGF5cyIsInByZXZpb3VzRGF5IiwiY29weSIsImFjdGl2ZURhdGUiLCJmaXJzdERheU9mTW9udGgiLCJsYXN0RGF5T2ZNb250aCIsImVuZE9mIiwibWF4RGF5cyIsImVtcHR5Rmlyc3REYXlzIiwiaSIsImRheSIsInB1c2giLCJqIiwiYWRkIiwic2VsZWN0ZWQiLCJpc0RlZmluZWQiLCJtb2RlbCIsImlzU2FtZSIsInRvZGF5IiwibW9tZW50IiwiZW1wdHlMYXN0RGF5cyIsImsiLCJteUxvY2FsZSIsImFjdGl2ZUxvY2FsZSIsInRoaXMiLCJidWlsZCIsInVuZGVmaW5lZCIsIkRhdGUiLCJkYXlzT2ZXZWVrIiwiREFURVRJTUVfRk9STUFUUyIsIlNIT1JUREFZIiwieWVhcnMiLCJ5IiwieWVhciIsInByZXZpb3VzTW9udGgiLCJzdWJ0cmFjdCIsIm5leHRNb250aCIsInNlbGVjdCIsInRvRGF0ZSIsInNlbGVjdFllYXIiLCJ5ZWFyU2VsZWN0aW9uIiwiZGlzcGxheVllYXJTZWxlY3Rpb24iLCJjYWxlbmRhckhlaWdodCIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJvZmZzZXRIZWlnaHQiLCJ5ZWFyU2VsZWN0b3JFbGVtZW50Iiwic3R5bGUiLCJoZWlnaHQiLCJhY3RpdmVZZWFyRWxlbWVudCIsInNjcm9sbFRvcCIsIm9mZnNldFRvcCIsImNhbmNlbCIsImhpZGUiLCJjbG9zZVBpY2tlciIsIiRhdHRycyIsImRhdGFEYXRlRm9ybWF0Iiwib3BlblBpY2tlciIsImV2Iiwic2hvdyIsInRhcmdldEV2ZW50IiwidGVtcGxhdGVVcmwiLCJsb2NhbHMiLCJkaWFsb2dNZFRoZW1lIiwidGhlbiIsImRpcmVjdGl2ZSIsInJlc3RyaWN0Iiwic2NvcGUiLCJsYWJlbCJdLCJtYXBwaW5ncyI6IkNBQUEsV0FBQUEsUUFBQUMsT0FBQSxzQ0FBQUMsS0FBQSxpQkFBQSxTQUFBQyxHQUFBQSxFQUFBQyxJQUFBLHNDQUFBLHc4RkFDQUQsRUFBQUMsSUFBQSxxQ0FBQSwyTkNEQSxXQUdBLFlBR0FKLFNBQUFDLE9BQUEsb0NBQUEsZUFDQUksV0FBQSwyQkFBQSxTQUFBLFdBQUEsWUFBQSxVQUFBLFlBQUEsVUFBQSxPQUFBLFNBQUEsVUFBQSxTQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQUNBLFFBQUFDLEdBQUFGLEdBQ0EsTUFBQUEsR0FHQUEsR0FGQSxPQUFBRyxVQUFBQyxTQUFBRCxVQUFBQyxTQUFBRCxVQUFBRSxpQkFBQUMsTUFBQSxLQUFBLEdBQUFBLE1BQUEsS0FBQSxJQUFBLEtBcUdBLFFBQUFDLEtBQ0EsR0FBQUMsTUFDQUMsRUFBQXRCLFFBQUF1QixLQUFBakIsRUFBQWtCLFlBQUFaLEtBQUEsR0FDQWEsRUFBQXpCLFFBQUF1QixLQUFBakIsRUFBQWtCLFlBQUFaLEtBQUEsR0FDQWMsRUFBQTFCLFFBQUF1QixLQUFBRSxHQUFBRSxNQUFBLFNBQ0FDLEVBQUE1QixRQUFBdUIsS0FBQUcsR0FBQWQsTUFFQU4sR0FBQXVCLGlCQUVBLEtBQUEsR0FBQUMsR0FBQUwsRUFBQU0sTUFBQUQsRUFBQSxFQUFBQSxJQUNBeEIsRUFBQXVCLGVBQUFHLFFBR0EsS0FBQSxHQUFBQyxHQUFBLEVBQUFMLEVBQUFLLEVBQUFBLElBQUEsQ0FDQSxHQUFB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QUFBLEVBQ0FFLEdBQUFJLFVBQUFKLEVBQUFJLFVBQUFELEVBQUFFLFVBQUFMLEVBQUFELGFBQUEsRUFBQUksRUFBQUosYUFBQSxLQW1DQTNELEVBQUFrRSxPQUFBLFdBQ0FoRSxFQUFBaUUsUUFHQW5FLEVBQUFvRSxZQUFBLFdBQ0FsRSxFQUFBaUUsS0FBQW5FLEVBQUE2QixjQUdBOUIsV0FBQSwrQkFBQSxTQUFBQyxFQUFBcUUsRUFBQXBFLEVBQUFFLEVBQUFELEdBRUFGLEVBQUE2QixTQURBbkMsUUFBQW9DLFVBQUE5QixFQUFBK0IsUUFFQUEsTUFBQUcsT0FBQWxDLEVBQUErQixPQUNBekIsS0FBQU4sRUFBQStCLFFBS0FBLE1BQUFVLE9BQ0FuQyxLQUFBLEdBQUFvQyxNQUdBLElBQUE0QixHQUFBLFlBQ0E1RSxTQUFBb0MsVUFBQXVDLEVBQUFDLGtCQUFBQSxFQUFBRCxFQUFBQyxnQkFFQXRFLEVBQUF1RSxXQUFBLFNBQUFDLEdBQ0F4RSxFQUFBdUQsZUFBQSxFQUVBckQsRUFBQXVFLE1BQ0FDLFlBQUFGLEVBQ0FHLFlBQUEsc0NBQ0E1RSxXQUFBLDBCQUNBNkUsUUFBQXRFLEtBQUFOLEVBQUE2QixTQUFBdkIsS0FBQUMsT0FBQThELEVBQUE5RCxPQUFBQyxRQUFBNkQsRUFBQVEsaUJBQ0FDLEtBQUEsU0FBQWpELEdBQ0FBLElBQ0E3QixFQUFBNkIsU0FBQUUsTUFBQTVCLEVBQUEsUUFBQTBCLEVBQUF2QixLQUFBZ0UsR0FDQXRFLEVBQUE2QixTQUFBdkIsS0FBQXVCLEVBQUF2QixLQUNBTixFQUFBK0IsTUFBQUYsRUFBQUUsWUFLQWdELFVBQUEsZ0JBQUEsV0FDQSxPQUNBQyxTQUFBLEtBQ0FqRixXQUFBLCtCQUNBa0YsT0FDQWxELE1BQUEsSUFDQW1ELE1BQUEsS0FFQVAsWUFBQSwyQ0MvTEEsV0FBQSxZQUVBakYsU0FBQUMsT0FBQSx5QkFDQSxhQUNBLGtDQUNBIiwiZmlsZSI6ImFuZ3VsYXItbWF0ZXJpYWwtY29tcG9uZW50cy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJhbmd1bGFyLm1vZHVsZShcIm5nTWF0ZXJpYWwuY29tcG9uZW50cy50ZW1wbGF0ZXNcIiwgW10pLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkgeyR0ZW1wbGF0ZUNhY2hlLnB1dChcImRhdGUtcGlja2VyL2RhdGUtcGlja2VyLWRpYWxvZy5odG1sXCIsXCI8bWQtZGlhbG9nIGNsYXNzPVxcXCJtZGMtZGF0ZS1waWNrZXJcXFwiIHN0eWxlPVxcXCJtYXgtd2lkdGg6IDkwJTsgbWF4LWhlaWdodDogOTAlXFxcIj5cXHJcXG4gICAgPCEtLSBEYXRlIHBpY2tlciAtLT5cXHJcXG4gICAgPGRpdiBtZC10aGVtZT1cXFwie3ttZFRoZW1lfX1cXFwiPlxcclxcbiAgICAgIDwhLS0gQ3VycmVudCBkYXkgb2Ygd2VlayAtLT5cXHJcXG4gICAgICA8bWQtdG9vbGJhciBjbGFzcz1cXFwibWQtaHVlLTIgbWRjLWRhdGUtcGlja2VyX19jdXJyZW50LWRheS1vZi13ZWVrXFxcIj5cXHJcXG4gICAgICAgIDxzcGFuPnt7IHNlbGVjdGVkLmRhdGUgfCBkYXRlOiBcXCdFRUVFXFwnIH19PC9zcGFuPlxcclxcbiAgICAgIDwvbWQtdG9vbGJhcj5cXHJcXG5cXHJcXG4gICAgICA8IS0tIEN1cnJlbnQgZGF0ZSAtLT5cXHJcXG4gICAgICA8bWQtdG9vbGJhciBjbGFzcz1cXFwibWRjLWRhdGUtcGlja2VyX19jdXJyZW50LWRhdGVcXFwiPlxcclxcbiAgICAgICAgPHNwYW4+e3sgc2VsZWN0ZWQuZGF0ZSB8IGRhdGUgOiBcXCdNTU1NXFwnIH19PC9zcGFuPlxcclxcbiAgICAgICAgPHN0cm9uZz57eyBzZWxlY3RlZC5kYXRlIHwgZGF0ZTogXFwnZGRcXCcgfX08L3N0cm9uZz5cXHJcXG4gICAgICAgIDxhIG5nLWNsaWNrPVxcXCJkaXNwbGF5WWVhclNlbGVjdGlvbigpXFxcIj57eyBzZWxlY3RlZC5kYXRlIHwgZGF0ZTogXFwneXl5eVxcJyB9fTwvYT5cXHJcXG4gICAgICA8L21kLXRvb2xiYXI+XFxyXFxuXFxyXFxuICAgICAgPCEtLSBDYWxlbmRhciAtLT5cXHJcXG4gICAgICA8ZGl2IGNsYXNzPVxcXCJtZGMtZGF0ZS1waWNrZXJfX2NhbGVuZGFyXFxcIiBuZy1pZj1cXFwiIXllYXJTZWxlY3Rpb25cXFwiPlxcclxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwibWRjLWRhdGUtcGlja2VyX19uYXZcXFwiPlxcclxcbiAgICAgICAgICA8bWQtYnV0dG9uIGNsYXNzPVxcXCJtZC1mYWIgbWQtcHJpbWFyeVxcXCIgYXJpYS1sYWJlbD1cXFwiUHJldmlvdXMgbW9udGhcXFwiIG5nLWNsaWNrPVxcXCJwcmV2aW91c01vbnRoKClcXFwiPlxcclxcbiAgICAgICAgICAgIDxpIGNsYXNzPVxcXCJtZGkgbWRpLWNoZXZyb24tbGVmdFxcXCI+PC9pPlxcclxcbiAgICAgICAgICA8L21kLWJ1dHRvbj5cXHJcXG5cXHJcXG4gICAgICAgICAgPHNwYW4+e3sgYWN0aXZlRGF0ZS5mb3JtYXQoXFwnTU1NTSBZWVlZXFwnKSB9fTwvc3Bhbj5cXHJcXG5cXHJcXG4gICAgICAgICAgPG1kLWJ1dHRvbiBjbGFzcz1cXFwibWQtZmFiIG1kLXByaW1hcnlcXFwiIGFyaWFsLWxhYmVsPVxcXCJOZXh0IG1vbnRoXFxcIiBuZy1jbGljaz1cXFwibmV4dE1vbnRoKClcXFwiPlxcclxcbiAgICAgICAgICAgIDxpIGNsYXNzPVxcXCJtZGkgbWRpLWNoZXZyb24tcmlnaHRcXFwiPjwvaT5cXHJcXG4gICAgICAgICAgPC9tZC1idXR0b24+XFxyXFxuICAgICAgICA8L2Rpdj5cXHJcXG5cXHJcXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcIm1kYy1kYXRlLXBpY2tlcl9fZGF5cy1vZi13ZWVrXFxcIj5cXHJcXG4gICAgICAgICAgPHNwYW4gbmctcmVwZWF0PVxcXCJkYXkgaW4gZGF5c09mV2Vla1xcXCI+e3sgZGF5IH19PC9zcGFuPlxcclxcbiAgICAgICAgPC9kaXY+XFxyXFxuXFxyXFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJtZGMtZGF0ZS1waWNrZXJfX2RheXNcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XFxcIm1kYy1kYXRlLXBpY2tlcl9fZGF5IG1kYy1kYXRlLXBpY2tlcl9fZGF5LS1pcy1lbXB0eVxcXCJcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5nLXJlcGVhdD1cXFwieCBpbiBlbXB0eUZpcnN0RGF5c1xcXCI+Jm5ic3A7PC9zcGFuPjwhLS1cXHJcXG5cXHJcXG4gICAgICAgICAgICAgICAgIC0tPjxkaXYgY2xhc3M9XFxcIm1kYy1kYXRlLXBpY2tlcl9fZGF5XFxcIlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICBuZy1jbGFzcz1cXFwieyBcXCdtZGMtZGF0ZS1waWNrZXJfX2RheS0taXMtc2VsZWN0ZWRcXCc6IGRheS5zZWxlY3RlZCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFwnbWRjLWRhdGUtcGlja2VyX19kYXktLWlzLXRvZGF5XFwnOiBkYXkudG9kYXkgfVxcXCJcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgbmctcmVwZWF0PVxcXCJkYXkgaW4gZGF5c1xcXCI+XFxyXFxuICAgICAgICAgIDxhIG5nLWNsaWNrPVxcXCJzZWxlY3QoZGF5KVxcXCI+e3sgZGF5ID8gZGF5LmZvcm1hdChcXCdEXFwnKSA6IFxcJ1xcJyB9fTwvYT5cXHJcXG4gICAgICAgIDwvZGl2PjwhLS1cXHJcXG5cXHJcXG4gICAgICAgICAgICAgICAgIC0tPjxzcGFuIGNsYXNzPVxcXCJtZGMtZGF0ZS1waWNrZXJfX2RheSBtZGMtZGF0ZS1waWNrZXJfX2RheS0taXMtZW1wdHlcXFwiXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICBuZy1yZXBlYXQ9XFxcInggaW4gZW1wdHlMYXN0RGF5c1xcXCI+Jm5ic3A7PC9zcGFuPlxcclxcbiAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgPC9kaXY+XFxyXFxuXFxyXFxuICAgICAgPCEtLSBZZWFyIHNlbGVjdGlvbiAtLT5cXHJcXG4gICAgICA8ZGl2IGNsYXNzPVxcXCJtZGMtZGF0ZS1waWNrZXJfX3llYXItc2VsZWN0b3JcXFwiIG5nLXNob3c9XFxcInllYXJTZWxlY3Rpb25cXFwiPlxcclxcbiAgICAgICAgPGEgY2xhc3M9XFxcIm1kYy1kYXRlLXBpY2tlcl9feWVhclxcXCJcXHJcXG4gICAgICAgICAgIG5nLWNsYXNzPVxcXCJ7IFxcJ21kYy1kYXRlLXBpY2tlcl9feWVhci0taXMtYWN0aXZlXFwnOiB5ZWFyID09IGFjdGl2ZURhdGUuZm9ybWF0KFxcJ1lZWVlcXCcpIH1cXFwiXFxyXFxuICAgICAgICAgICBuZy1yZXBlYXQ9XFxcInllYXIgaW4geWVhcnNcXFwiXFxyXFxuICAgICAgICAgICBuZy1jbGljaz1cXFwic2VsZWN0WWVhcih5ZWFyKVxcXCJcXHJcXG4gICAgICAgICAgIG5nLWlmPVxcXCJ5ZWFyU2VsZWN0aW9uXFxcIj5cXHJcXG4gICAgICAgICAgPHNwYW4+e3t5ZWFyfX08L3NwYW4+XFxyXFxuICAgICAgICA8L2E+XFxyXFxuICAgICAgPC9kaXY+XFxyXFxuXFxyXFxuICAgICAgPCEtLSBBY3Rpb25zIC0tPlxcclxcbiAgICAgIDxkaXYgY2xhc3M9XFxcIm1kLWFjdGlvbnMgbWRjLWRhdGUtcGlja2VyX19hY3Rpb25zXFxcIiBsYXlvdXQ9XFxcInJvd1xcXCIgbGF5b3V0LWFsaWduPVxcXCJlbmRcXFwiPlxcclxcbiAgICAgICAgPG1kLWJ1dHRvbiBjbGFzcz1cXFwibWQtcHJpbWFyeVxcXCIgbmctY2xpY2s9XFxcImNhbmNlbCgpXFxcIj5DYW5jZWw8L21kLWJ1dHRvbj5cXHJcXG4gICAgICAgIDxtZC1idXR0b24gY2xhc3M9XFxcIm1kLXByaW1hcnlcXFwiIG5nLWNsaWNrPVxcXCJjbG9zZVBpY2tlcigpXFxcIj5PazwvbWQtYnV0dG9uPlxcclxcbiAgICAgIDwvZGl2PlxcclxcbiAgICA8L2Rpdj5cXHJcXG48L21kLWRpYWxvZz5cXHJcXG5cIik7XG4kdGVtcGxhdGVDYWNoZS5wdXQoXCJkYXRlLXBpY2tlci9kYXRlLXBpY2tlci1pbnB1dC5odG1sXCIsXCI8bWQtaW5wdXQtY29udGFpbmVyIG5nLWNsaWNrPVxcXCJvcGVuUGlja2VyKCRldmVudClcXFwiPlxcclxcbiAgPGxhYmVsPnt7bGFiZWx9fTwvbGFiZWw+XFxyXFxuICA8aW5wdXQgdHlwZT1cXFwidGV4dFxcXCIgbmctbW9kZWw9XFxcInNlbGVjdGVkLm1vZGVsXFxcIiBuZy1kaXNhYmxlZD1cXFwidHJ1ZVxcXCIgbmctY2xpY2s9XFxcIm9wZW5QaWNrZXIoJGV2ZW50KVxcXCI+XFxyXFxuPC9tZC1pbnB1dC1jb250YWluZXI+XFxyXFxuXCIpO31dKTsiLCIvKiBnbG9iYWwgYW5ndWxhciAqL1xyXG4vKiBnbG9iYWwgbW9tZW50ICovXHJcbi8qIGdsb2JhbCBuYXZpZ2F0b3IgKi9cclxuJ3VzZSBzdHJpY3QnOyAvLyBqc2hpbnQgaWdub3JlOmxpbmVcclxuXHJcblxyXG5hbmd1bGFyLm1vZHVsZSgnbmdNYXRlcmlhbC5jb21wb25lbnRzLmRhdGVQaWNrZXInLCBbJ25nTWF0ZXJpYWwnXSlcclxuLmNvbnRyb2xsZXIoJ21kY0RhdGVQaWNrZXJDb250cm9sbGVyJywgWyckc2NvcGUnLCckdGltZW91dCcsJyRtZERpYWxvZycsJyRmaWx0ZXInLCckZG9jdW1lbnQnLCckbG9jYWxlJywnZGF0ZScsJ2xvY2FsZScsJ21kVGhlbWUnLCBmdW5jdGlvbiAoJHNjb3BlLCAkdGltZW91dCwgJG1kRGlhbG9nLCAkZmlsdGVyLCAkZG9jdW1lbnQsICRsb2NhbGUsIGRhdGUsIGxvY2FsZSwgbWRUaGVtZSkge1xyXG4gICAgZnVuY3Rpb24gY2hlY2tMb2NhbGUobG9jYWxlKSB7XHJcbiAgICAgIGlmICghbG9jYWxlKSB7XHJcbiAgICAgICAgcmV0dXJuIChuYXZpZ2F0b3IubGFuZ3VhZ2UgIT09IG51bGwgPyBuYXZpZ2F0b3IubGFuZ3VhZ2UgOiBuYXZpZ2F0b3IuYnJvd3Nlckxhbmd1YWdlKS5zcGxpdCgnXycpWzBdLnNwbGl0KCctJylbMF0gfHwgJ2VuJztcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gbG9jYWxlO1xyXG4gICAgfVxyXG4gICAgJHNjb3BlLm15TG9jYWxlID0gJGxvY2FsZTtcclxuXHJcbiAgICAkc2NvcGUubW9kZWwgPSBkYXRlO1xyXG5cclxuICAgICRzY29wZS5tZFRoZW1lID0gbWRUaGVtZSA/IG1kVGhlbWUgOiAnZGVmYXVsdCc7XHJcblxyXG4gICAgdmFyIGFjdGl2ZUxvY2FsZTtcclxuXHJcbiAgICB0aGlzLmJ1aWxkID0gZnVuY3Rpb24gKGxvY2FsZSkge1xyXG4gICAgICBhY3RpdmVMb2NhbGUgPSBsb2NhbGU7XHJcblxyXG4gICAgICBtb21lbnQubG9jYWxlKGFjdGl2ZUxvY2FsZSk7XHJcblxyXG4gICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQoJHNjb3BlLm1vZGVsKSkge1xyXG4gICAgICAgICRzY29wZS5zZWxlY3RlZCA9IHtcclxuICAgICAgICAgIG1vZGVsOiBtb21lbnQoJHNjb3BlLm1vZGVsKSxcclxuICAgICAgICAgIGRhdGU6ICRzY29wZS5tb2RlbFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5hY3RpdmVEYXRlID0gbW9tZW50KCRzY29wZS5tb2RlbCk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgJHNjb3BlLnNlbGVjdGVkID0ge1xyXG4gICAgICAgICAgbW9kZWw6IHVuZGVmaW5lZCxcclxuICAgICAgICAgIGRhdGU6IG5ldyBEYXRlKClcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuYWN0aXZlRGF0ZSA9IG1vbWVudCgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAkc2NvcGUubW9tZW50ID0gbW9tZW50O1xyXG5cclxuICAgICAgJHNjb3BlLmRheXMgPSBbXTtcclxuICAgICAgLy9UT0RPOiBVc2UgbW9tZW50IGxvY2FsZSB0byBzZXQgZmlyc3QgZGF5IG9mIHdlZWsgcHJvcGVybHkuXHJcblxyXG4gICAgICAkc2NvcGUuZGF5c09mV2VlayA9IFskc2NvcGUubXlMb2NhbGUuREFURVRJTUVfRk9STUFUUy5TSE9SVERBWVswXSxcclxuICAgICAgICAkc2NvcGUubXlMb2NhbGUuREFURVRJTUVfRk9STUFUUy5TSE9SVERBWVsxXSxcclxuICAgICAgICAkc2NvcGUubXlMb2NhbGUuREFURVRJTUVfRk9STUFUUy5TSE9SVERBWVsyXSxcclxuICAgICAgICAkc2NvcGUubXlMb2NhbGUuREFURVRJTUVfRk9STUFUUy5TSE9SVERBWVszXSxcclxuICAgICAgICAkc2NvcGUubXlMb2NhbGUuREFURVRJTUVfRk9STUFUUy5TSE9SVERBWVs0XSxcclxuICAgICAgICAkc2NvcGUubXlMb2NhbGUuREFURVRJTUVfRk9STUFUUy5TSE9SVERBWVs1XSxcclxuICAgICAgICAkc2NvcGUubXlMb2NhbGUuREFURVRJTUVfRk9STUFUUy5TSE9SVERBWVs2XV07XHJcblxyXG4gICAgICAkc2NvcGUueWVhcnMgPSBbXTtcclxuXHJcbiAgICAgIGZvciAodmFyIHkgPSBtb21lbnQoKS55ZWFyKCkgLSAxMDA7IHkgPD0gbW9tZW50KCkueWVhcigpICsgMTAwOyB5KyspIHtcclxuICAgICAgICAkc2NvcGUueWVhcnMucHVzaCh5KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZ2VuZXJhdGVDYWxlbmRhcigpO1xyXG4gICAgfTtcclxuICAgIHRoaXMuYnVpbGQoY2hlY2tMb2NhbGUobG9jYWxlKSk7XHJcblxyXG4gICAgJHNjb3BlLnByZXZpb3VzTW9udGggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICRzY29wZS5hY3RpdmVEYXRlID0gJHNjb3BlLmFjdGl2ZURhdGUuc3VidHJhY3QoMSwgJ21vbnRoJyk7XHJcbiAgICAgIGdlbmVyYXRlQ2FsZW5kYXIoKTtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLm5leHRNb250aCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgJHNjb3BlLmFjdGl2ZURhdGUgPSAkc2NvcGUuYWN0aXZlRGF0ZS5hZGQoMSwgJ21vbnRoJyk7XHJcbiAgICAgIGdlbmVyYXRlQ2FsZW5kYXIoKTtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLnNlbGVjdCA9IGZ1bmN0aW9uIChkYXkpIHtcclxuICAgICAgJHNjb3BlLnNlbGVjdGVkID0ge1xyXG4gICAgICAgIG1vZGVsOiBkYXkudG9EYXRlKCksXHJcbiAgICAgICAgZGF0ZTogZGF5LnRvRGF0ZSgpXHJcbiAgICAgIH07XHJcblxyXG4gICAgICAkc2NvcGUubW9kZWwgPSBkYXkudG9EYXRlKCk7XHJcblxyXG4gICAgICBnZW5lcmF0ZUNhbGVuZGFyKCk7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5zZWxlY3RZZWFyID0gZnVuY3Rpb24gKHllYXIpIHtcclxuICAgICAgJHNjb3BlLnllYXJTZWxlY3Rpb24gPSBmYWxzZTtcclxuXHJcbiAgICAgICRzY29wZS5zZWxlY3RlZC5tb2RlbCA9IG1vbWVudCgkc2NvcGUuc2VsZWN0ZWQuZGF0ZSkueWVhcih5ZWFyKS50b0RhdGUoKTtcclxuICAgICAgJHNjb3BlLnNlbGVjdGVkLmRhdGUgPSBtb21lbnQoJHNjb3BlLnNlbGVjdGVkLmRhdGUpLnllYXIoeWVhcikudG9EYXRlKCk7XHJcbiAgICAgICRzY29wZS5tb2RlbCA9IG1vbWVudCgkc2NvcGUuc2VsZWN0ZWQuZGF0ZSkudG9EYXRlKCk7XHJcbiAgICAgICRzY29wZS5hY3RpdmVEYXRlID0gJHNjb3BlLmFjdGl2ZURhdGUuYWRkKHllYXIgLSAkc2NvcGUuYWN0aXZlRGF0ZS55ZWFyKCksICd5ZWFyJyk7XHJcblxyXG4gICAgICBnZW5lcmF0ZUNhbGVuZGFyKCk7XHJcbiAgICB9O1xyXG4gICAgJHNjb3BlLmRpc3BsYXlZZWFyU2VsZWN0aW9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICB2YXIgY2FsZW5kYXJIZWlnaHQgPSAkZG9jdW1lbnRbMF0uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbWRjLWRhdGUtcGlja2VyX19jYWxlbmRhcicpWzBdLm9mZnNldEhlaWdodDtcclxuICAgICAgdmFyIHllYXJTZWxlY3RvckVsZW1lbnQgPSAkZG9jdW1lbnRbMF0uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbWRjLWRhdGUtcGlja2VyX195ZWFyLXNlbGVjdG9yJylbMF07XHJcbiAgICAgIHllYXJTZWxlY3RvckVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gY2FsZW5kYXJIZWlnaHQgKyAncHgnO1xyXG5cclxuICAgICAgJHNjb3BlLnllYXJTZWxlY3Rpb24gPSB0cnVlO1xyXG5cclxuICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBhY3RpdmVZZWFyRWxlbWVudCA9ICRkb2N1bWVudFswXS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdtZGMtZGF0ZS1waWNrZXJfX3llYXItLWlzLWFjdGl2ZScpWzBdO1xyXG4gICAgICAgIHllYXJTZWxlY3RvckVsZW1lbnQuc2Nyb2xsVG9wID0geWVhclNlbGVjdG9yRWxlbWVudC5zY3JvbGxUb3AgKyBhY3RpdmVZZWFyRWxlbWVudC5vZmZzZXRUb3AgLSB5ZWFyU2VsZWN0b3JFbGVtZW50Lm9mZnNldEhlaWdodCAvIDIgKyBhY3RpdmVZZWFyRWxlbWVudC5vZmZzZXRIZWlnaHQgLyAyO1xyXG4gICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gZ2VuZXJhdGVDYWxlbmRhcigpIHtcclxuICAgICAgdmFyIGRheXMgPSBbXSxcclxuICAgICAgICBwcmV2aW91c0RheSA9IGFuZ3VsYXIuY29weSgkc2NvcGUuYWN0aXZlRGF0ZSkuZGF0ZSgwKSxcclxuICAgICAgICBmaXJzdERheU9mTW9udGggPSBhbmd1bGFyLmNvcHkoJHNjb3BlLmFjdGl2ZURhdGUpLmRhdGUoMSksXHJcbiAgICAgICAgbGFzdERheU9mTW9udGggPSBhbmd1bGFyLmNvcHkoZmlyc3REYXlPZk1vbnRoKS5lbmRPZignbW9udGgnKSxcclxuICAgICAgICBtYXhEYXlzID0gYW5ndWxhci5jb3B5KGxhc3REYXlPZk1vbnRoKS5kYXRlKCk7XHJcblxyXG4gICAgICAkc2NvcGUuZW1wdHlGaXJzdERheXMgPSBbXTtcclxuXHJcbiAgICAgIGZvciAodmFyIGkgPSAgZmlyc3REYXlPZk1vbnRoLmRheSgpOyBpID4gMDsgaS0tKSB7XHJcbiAgICAgICAgJHNjb3BlLmVtcHR5Rmlyc3REYXlzLnB1c2goe30pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1heERheXM7IGorKykge1xyXG4gICAgICAgIHZhciBkYXRlID0gYW5ndWxhci5jb3B5KHByZXZpb3VzRGF5LmFkZCgxLCAnZGF5cycpKTtcclxuXHJcbiAgICAgICAgZGF0ZS5zZWxlY3RlZCA9IGFuZ3VsYXIuaXNEZWZpbmVkKCRzY29wZS5zZWxlY3RlZC5tb2RlbCkgJiYgZGF0ZS5pc1NhbWUoJHNjb3BlLnNlbGVjdGVkLmRhdGUsICdkYXknKTtcclxuICAgICAgICBkYXRlLnRvZGF5ID0gZGF0ZS5pc1NhbWUobW9tZW50KCksICdkYXknKTtcclxuXHJcbiAgICAgICAgZGF5cy5wdXNoKGRhdGUpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAkc2NvcGUuZW1wdHlMYXN0RGF5cyA9IFtdO1xyXG5cclxuICAgICAgZm9yICh2YXIgayA9IDcgLSAobGFzdERheU9mTW9udGguZGF5KCkgPT09IDAgPyA3IDogbGFzdERheU9mTW9udGguZGF5KCkpOyBrID4gMDsgay0tKSB7XHJcbiAgICAgICAgJHNjb3BlLmVtcHR5TGFzdERheXMucHVzaCh7fSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgICRzY29wZS5kYXlzID0gZGF5cztcclxuICAgIH1cclxuXHJcbiAgICAkc2NvcGUuY2FuY2VsID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICRtZERpYWxvZy5oaWRlKCk7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5jbG9zZVBpY2tlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgJG1kRGlhbG9nLmhpZGUoJHNjb3BlLnNlbGVjdGVkKTtcclxuICAgIH07XHJcbiAgfV0pXHJcbi5jb250cm9sbGVyKCdtZGNEYXRlUGlja2VySW5wdXRDb250cm9sbGVyJywgZnVuY3Rpb24gKCRzY29wZSwgJGF0dHJzLCAkdGltZW91dCwgJGZpbHRlciwgJG1kRGlhbG9nKSB7XHJcbiAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQoJHNjb3BlLm1vZGVsKSkge1xyXG4gICAgICAkc2NvcGUuc2VsZWN0ZWQgPSB7XHJcbiAgICAgICAgbW9kZWw6IG1vbWVudCgkc2NvcGUubW9kZWwpLFxyXG4gICAgICAgIGRhdGU6ICRzY29wZS5tb2RlbFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICRzY29wZS5zZWxlY3RlZCA9IHtcclxuICAgICAgICBtb2RlbDogdW5kZWZpbmVkLFxyXG4gICAgICAgIGRhdGU6IG5ldyBEYXRlKClcclxuICAgICAgfTtcclxuICAgIH1cclxuICAgIHZhciBkYXRhRGF0ZUZvcm1hdCA9ICdtZWRpdW1EYXRlJztcclxuICAgIGlmKGFuZ3VsYXIuaXNEZWZpbmVkKCRhdHRycy5kYXRhRGF0ZUZvcm1hdCkpIGRhdGFEYXRlRm9ybWF0ID0gJGF0dHJzLmRhdGFEYXRlRm9ybWF0O1xyXG5cclxuICAgICRzY29wZS5vcGVuUGlja2VyID0gZnVuY3Rpb24gKGV2KSB7XHJcbiAgICAgICRzY29wZS55ZWFyU2VsZWN0aW9uID0gZmFsc2U7XHJcblxyXG4gICAgICAkbWREaWFsb2cuc2hvdyh7XHJcbiAgICAgICAgdGFyZ2V0RXZlbnQ6IGV2LFxyXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnZGF0ZS1waWNrZXIvZGF0ZS1waWNrZXItZGlhbG9nLmh0bWwnLFxyXG4gICAgICAgIGNvbnRyb2xsZXI6ICdtZGNEYXRlUGlja2VyQ29udHJvbGxlcicsXHJcbiAgICAgICAgbG9jYWxzOiB7ZGF0ZTogJHNjb3BlLnNlbGVjdGVkLmRhdGUsIGxvY2FsZTogJGF0dHJzLmxvY2FsZSwgbWRUaGVtZTogJGF0dHJzLmRpYWxvZ01kVGhlbWV9XHJcbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHNlbGVjdGVkKSB7XHJcbiAgICAgICAgaWYgKHNlbGVjdGVkKSB7XHJcbiAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWQubW9kZWwgPSAkZmlsdGVyKCdkYXRlJykoc2VsZWN0ZWQuZGF0ZSwgZGF0YURhdGVGb3JtYXQpO1xyXG4gICAgICAgICAgJHNjb3BlLnNlbGVjdGVkLmRhdGUgPSBzZWxlY3RlZC5kYXRlO1xyXG4gICAgICAgICAgJHNjb3BlLm1vZGVsID0gc2VsZWN0ZWQubW9kZWw7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH07XHJcbiAgfSlcclxuLmRpcmVjdGl2ZSgnbWRjRGF0ZVBpY2tlcicsIGZ1bmN0aW9uICgpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHJlc3RyaWN0OiAnQUUnLFxyXG4gICAgICBjb250cm9sbGVyOiAnbWRjRGF0ZVBpY2tlcklucHV0Q29udHJvbGxlcicsXHJcbiAgICAgIHNjb3BlOiB7XHJcbiAgICAgICAgbW9kZWw6ICc9JyxcclxuICAgICAgICBsYWJlbDogJ0AnXHJcbiAgICAgIH0sXHJcbiAgICAgIHRlbXBsYXRlVXJsOiAnZGF0ZS1waWNrZXIvZGF0ZS1waWNrZXItaW5wdXQuaHRtbCdcclxuICAgIH07XHJcbiAgfSk7XHJcbiIsIid1c2Ugc3RyaWN0JztcclxuXHJcbmFuZ3VsYXIubW9kdWxlKCduZ01hdGVyaWFsLmNvbXBvbmVudHMnLCBbXHJcbiAgJ25nTWF0ZXJpYWwnLFxyXG4gICduZ01hdGVyaWFsLmNvbXBvbmVudHMudGVtcGxhdGVzJyxcclxuICAnbmdNYXRlcmlhbC5jb21wb25lbnRzLmRhdGVQaWNrZXInXHJcbl0pO1xyXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=