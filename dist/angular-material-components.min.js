!function(){angular.module("ngMaterial.components.templates",[]).run(["$templateCache",function(e){e.put("date-picker/date-picker-dialog.html",'<md-dialog class="mdc-date-picker" style="max-width: 90%; max-height: 90%">\r\n    <!-- Date picker -->\r\n    <div md-theme="{{mdTheme}}">\r\n      <!-- Current day of week -->\r\n      <md-toolbar class="md-hue-2 mdc-date-picker__current-day-of-week">\r\n        <span>{{ selected.date | date: \'EEEE\' }}</span>\r\n      </md-toolbar>\r\n\r\n      <!-- Current date -->\r\n      <md-toolbar class="mdc-date-picker__current-date">\r\n        <span>{{ selected.date | date : \'MMMM\' }}</span>\r\n        <strong>{{ selected.date | date: \'dd\' }}</strong>\r\n        <a ng-click="displayYearSelection()">{{ selected.date | date: \'yyyy\' }}</a>\r\n      </md-toolbar>\r\n\r\n      <!-- Calendar -->\r\n      <div class="mdc-date-picker__calendar" ng-if="!yearSelection">\r\n        <div class="mdc-date-picker__nav">\r\n          <md-button class="md-fab md-primary" aria-label="Previous month" ng-click="previousMonth()">\r\n            <i class="mdi mdi-chevron-left"></i>\r\n          </md-button>\r\n\r\n          <span>{{ activeDate | date: \'MMMM yyyy\' }}</span>\r\n\r\n          <md-button class="md-fab md-primary" aria-label="Next month" ng-click="nextMonth()">\r\n            <i class="mdi mdi-chevron-right"></i>\r\n          </md-button>\r\n        </div>\r\n\r\n        <div class="mdc-date-picker__days-of-week">\r\n          <span ng-repeat="day in daysOfWeek">{{ day }}</span>\r\n        </div>\r\n\r\n        <div class="mdc-date-picker__days">\r\n                    <span class="mdc-date-picker__day mdc-date-picker__day--is-empty"\r\n                          ng-repeat="x in emptyFirstDays">&nbsp;</span><!--\r\n\r\n                 --><div class="mdc-date-picker__day"\r\n                         ng-class="{ \'mdc-date-picker__day--is-selected\': day.selected,\r\n                                     \'mdc-date-picker__day--is-today\': day.today }"\r\n                         ng-repeat="day in days">\r\n          <a ng-click="select(day)">{{ day.date ? (day.date | date: \'dd\') : \'\' }}</a>\r\n        </div><!--\r\n\r\n                 --><span class="mdc-date-picker__day mdc-date-picker__day--is-empty"\r\n                          ng-repeat="x in emptyLastDays">&nbsp;</span>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Year selection -->\r\n      <div class="mdc-date-picker__year-selector" ng-show="yearSelection">\r\n        <a class="mdc-date-picker__year"\r\n           ng-class="{ \'mdc-date-picker__year--is-active\': year == activeDate.format(\'YYYY\') }"\r\n           ng-repeat="year in years"\r\n           ng-click="selectYear(year)"\r\n           ng-if="yearSelection">\r\n          <span>{{year}}</span>\r\n        </a>\r\n      </div>\r\n\r\n      <!-- Actions -->\r\n      <div class="md-actions mdc-date-picker__actions" layout="row" layout-align="end">\r\n        <md-button class="md-primary" ng-click="cancel()">Cancel</md-button>\r\n        <md-button class="md-primary" ng-click="closePicker()">Ok</md-button>\r\n      </div>\r\n    </div>\r\n</md-dialog>\r\n'),e.put("date-picker/date-picker-input.html",'<md-input-container ng-click="openPicker($event)">\r\n  <label>{{label}}</label>\r\n  <input type="text" ng-model="selected.model" ng-disabled="true" ng-click="openPicker($event)">\r\n</md-input-container>\r\n')}])}(),function(){"use strict";angular.module("ngMaterial.components.datePicker",["ngMaterial"]).controller("mdcDatePickerController",["$scope","$timeout","$mdDialog","$filter","$document","$locale","date","locale","mdTheme",function(e,t,a,n,r,d,c,l,i){function o(e){return e?e:(null!==navigator.language?navigator.language:navigator.browserLanguage).split("_")[0].split("-")[0]||"en"}function s(){var t=[],a=new Date(e.activeDate.getFullYear(),e.activeDate.getMonth(),1),n=new Date(e.activeDate.getFullYear(),e.activeDate.getMonth()+1,0),r=n.getUTCDate();e.emptyFirstDays=[];for(var d=a.getDay();d>0;d--)e.emptyFirstDays.push({});var c=a,l=new Date;l.setHours(0,0,0,0);for(var i=0;r>i;i++){var o={};o.date=c,o.selected=c.getTime()===e.selected.date.getTime(),o.today=c.getTime()===l.getTime(),t.push(o),c=new Date(c),c=new Date(c.setDate(c.getDate()+1))}e.emptyLastDays=[];for(var s=n.getDay()+1;7>s;s++)e.emptyLastDays.push({});e.days=t}e.myLocale=d,e.model=c,e.mdTheme=i?i:"default";e.activeDate=new Date,this.build=function(t){angular.isDefined(e.model)?(e.selected={model:e.model,date:e.model},e.activeDate=e.model):(e.selected={model:void 0,date:new Date},e.activeDate=new Date),e.days=[],e.daysOfWeek=[e.myLocale.DATETIME_FORMATS.SHORTDAY[0],e.myLocale.DATETIME_FORMATS.SHORTDAY[1],e.myLocale.DATETIME_FORMATS.SHORTDAY[2],e.myLocale.DATETIME_FORMATS.SHORTDAY[3],e.myLocale.DATETIME_FORMATS.SHORTDAY[4],e.myLocale.DATETIME_FORMATS.SHORTDAY[5],e.myLocale.DATETIME_FORMATS.SHORTDAY[6]],e.years=[];for(var a=e.activeDate.getFullYear()-50;a<=e.activeDate.getFullYear()+50;a++)e.years.push(a);s()},this.build(o(l)),e.previousMonth=function(){e.activeDate=new Date(e.activeDate.setMonth(e.activeDate.getMonth()-1)),s()},e.nextMonth=function(){e.activeDate=new Date(e.activeDate.setMonth(e.activeDate.getMonth()+1)),s()},e.select=function(t){e.selected={model:t.date,date:t.date},e.model=t.date,s()},e.selectYear=function(t){e.yearSelection=!1,e.selected.model=e.selected.date.setFullYear(t),e.selected.date=e.selected.date.setFullYear(t),e.model=e.model,e.activeDate.setFullYear(t),s()},e.displayYearSelection=function(){var a=r[0].getElementsByClassName("mdc-date-picker__calendar")[0].offsetHeight,n=r[0].getElementsByClassName("mdc-date-picker__year-selector")[0];n.style.height=a+"px",e.yearSelection=!0,t(function(){var e=r[0].getElementsByClassName("mdc-date-picker__year--is-active")[0];n.scrollTop=n.scrollTop+e.offsetTop-n.offsetHeight/2+e.offsetHeight/2})},e.cancel=function(){a.hide()},e.closePicker=function(){a.hide(e.selected)}}]).controller("mdcDatePickerInputController",function(e,t,a,n,r){e.selected=angular.isDefined(e.model)?{model:moment(e.model),date:e.model}:{model:void 0,date:new Date};var d="mediumDate";angular.isDefined(t.dataDateFormat)&&(d=t.dataDateFormat),e.openPicker=function(a){e.yearSelection=!1,r.show({targetEvent:a,templateUrl:"date-picker/date-picker-dialog.html",controller:"mdcDatePickerController",locals:{date:e.selected.date,locale:t.locale,mdTheme:t.dialogMdTheme}}).then(function(t){t&&(e.selected.model=n("date")(t.date,d),e.selected.date=t.date,e.model=t.model)})}}).directive("mdcDatePicker",function(){return{restrict:"AE",controller:"mdcDatePickerInputController",scope:{model:"=",label:"@"},templateUrl:"date-picker/date-picker-input.html"}})}(),function(){"use strict";angular.module("ngMaterial.components",["ngMaterial","ngMaterial.components.templates","ngMaterial.components.datePicker"])}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi50bXAvdGVtcGxhdGVzL3RlbXBsYXRlcy5qcyIsInNyYy9kYXRlLXBpY2tlci9kYXRlLXBpY2tlci5qcyIsInNyYy9jb21wb25lbnRzLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJydW4iLCIkdGVtcGxhdGVDYWNoZSIsInB1dCIsImNvbnRyb2xsZXIiLCIkc2NvcGUiLCIkdGltZW91dCIsIiRtZERpYWxvZyIsIiRmaWx0ZXIiLCIkZG9jdW1lbnQiLCIkbG9jYWxlIiwiZGF0ZSIsImxvY2FsZSIsIm1kVGhlbWUiLCJjaGVja0xvY2FsZSIsIm5hdmlnYXRvciIsImxhbmd1YWdlIiwiYnJvd3Nlckxhbmd1YWdlIiwic3BsaXQiLCJnZW5lcmF0ZUNhbGVuZGFyIiwiZGF5cyIsImZpcnN0RGF5T2ZNb250aCIsIkRhdGUiLCJhY3RpdmVEYXRlIiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsImxhc3REYXlPZk1vbnRoIiwibWF4RGF5cyIsImdldFVUQ0RhdGUiLCJlbXB0eUZpcnN0RGF5cyIsImkiLCJnZXREYXkiLCJwdXNoIiwiZWFjaCIsInRvZGF5Iiwic2V0SG91cnMiLCJqIiwic2VsZWN0ZWQiLCJnZXRUaW1lIiwic2V0RGF0ZSIsImdldERhdGUiLCJlbXB0eUxhc3REYXlzIiwiayIsIm15TG9jYWxlIiwibW9kZWwiLCJ0aGlzIiwiYnVpbGQiLCJpc0RlZmluZWQiLCJ1bmRlZmluZWQiLCJkYXlzT2ZXZWVrIiwiREFURVRJTUVfRk9STUFUUyIsIlNIT1JUREFZIiwieWVhcnMiLCJ5IiwicHJldmlvdXNNb250aCIsInNldE1vbnRoIiwibmV4dE1vbnRoIiwic2VsZWN0IiwiZGF5Iiwic2VsZWN0WWVhciIsInllYXIiLCJ5ZWFyU2VsZWN0aW9uIiwic2V0RnVsbFllYXIiLCJkaXNwbGF5WWVhclNlbGVjdGlvbiIsImNhbGVuZGFySGVpZ2h0IiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsIm9mZnNldEhlaWdodCIsInllYXJTZWxlY3RvckVsZW1lbnQiLCJzdHlsZSIsImhlaWdodCIsImFjdGl2ZVllYXJFbGVtZW50Iiwic2Nyb2xsVG9wIiwib2Zmc2V0VG9wIiwiY2FuY2VsIiwiaGlkZSIsImNsb3NlUGlja2VyIiwiJGF0dHJzIiwibW9tZW50IiwiZGF0YURhdGVGb3JtYXQiLCJvcGVuUGlja2VyIiwiZXYiLCJzaG93IiwidGFyZ2V0RXZlbnQiLCJ0ZW1wbGF0ZVVybCIsImxvY2FscyIsImRpYWxvZ01kVGhlbWUiLCJ0aGVuIiwiZGlyZWN0aXZlIiwicmVzdHJpY3QiLCJzY29wZSIsImxhYmVsIl0sIm1hcHBpbmdzIjoiQ0FBQSxXQUFBQSxRQUFBQyxPQUFBLHNDQUFBQyxLQUFBLGlCQUFBLFNBQUFDLEdBQUFBLEVBQUFDLElBQUEsc0NBQUEsbzlGQUNBRCxFQUFBQyxJQUFBLHFDQUFBLDJOQ0RBLFdBR0EsWUFHQUosU0FBQUMsT0FBQSxvQ0FBQSxlQUNBSSxXQUFBLDJCQUFBLFNBQUEsV0FBQSxZQUFBLFVBQUEsWUFBQSxVQUFBLE9BQUEsU0FBQSxVQUNBLFNBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEdBQ0EsUUFBQUMsR0FBQUYsR0FDQSxNQUFBQSxHQUdBQSxHQUZBLE9BQUFHLFVBQUFDLFNBQUFELFVBQUFDLFNBQUFELFVBQUFFLGlCQUFBQyxNQUFBLEtBQUEsR0FBQUEsTUFBQSxLQUFBLElBQUEsS0FzR0EsUUFBQUMsS0FDQSxHQUFBQyxNQUVBQyxFQUFBLEdBQUFDLE1BQUFqQixFQUFBa0IsV0FBQUMsY0FBQW5CLEVBQUFrQixXQUFBRSxXQUFBLEdBQ0FDLEVBQUEsR0FBQUosTUFBQWpCLEVBQUFrQixXQUFBQyxjQUFBbkIsRUFBQWtCLFdBQUFFLFdBQUEsRUFBQSxHQUNBRSxFQUFBRCxFQUFBRSxZQUVBdkIsR0FBQXdCLGlCQUdBLEtBQUEsR0FBQUMsR0FBQVQsRUFBQVUsU0FBQUQsRUFBQSxFQUFBQSxJQUNBekIsRUFBQXdCLGVBQUFHLFFBR0EsSUFBQUMsR0FBQVosRUFDQWEs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cmNlc0NvbnRlbnQiOlsiYW5ndWxhci5tb2R1bGUoXCJuZ01hdGVyaWFsLmNvbXBvbmVudHMudGVtcGxhdGVzXCIsIFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIiwgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHskdGVtcGxhdGVDYWNoZS5wdXQoXCJkYXRlLXBpY2tlci9kYXRlLXBpY2tlci1kaWFsb2cuaHRtbFwiLFwiPG1kLWRpYWxvZyBjbGFzcz1cXFwibWRjLWRhdGUtcGlja2VyXFxcIiBzdHlsZT1cXFwibWF4LXdpZHRoOiA5MCU7IG1heC1oZWlnaHQ6IDkwJVxcXCI+XFxyXFxuICAgIDwhLS0gRGF0ZSBwaWNrZXIgLS0+XFxyXFxuICAgIDxkaXYgbWQtdGhlbWU9XFxcInt7bWRUaGVtZX19XFxcIj5cXHJcXG4gICAgICA8IS0tIEN1cnJlbnQgZGF5IG9mIHdlZWsgLS0+XFxyXFxuICAgICAgPG1kLXRvb2xiYXIgY2xhc3M9XFxcIm1kLWh1ZS0yIG1kYy1kYXRlLXBpY2tlcl9fY3VycmVudC1kYXktb2Ytd2Vla1xcXCI+XFxyXFxuICAgICAgICA8c3Bhbj57eyBzZWxlY3RlZC5kYXRlIHwgZGF0ZTogXFwnRUVFRVxcJyB9fTwvc3Bhbj5cXHJcXG4gICAgICA8L21kLXRvb2xiYXI+XFxyXFxuXFxyXFxuICAgICAgPCEtLSBDdXJyZW50IGRhdGUgLS0+XFxyXFxuICAgICAgPG1kLXRvb2xiYXIgY2xhc3M9XFxcIm1kYy1kYXRlLXBpY2tlcl9fY3VycmVudC1kYXRlXFxcIj5cXHJcXG4gICAgICAgIDxzcGFuPnt7IHNlbGVjdGVkLmRhdGUgfCBkYXRlIDogXFwnTU1NTVxcJyB9fTwvc3Bhbj5cXHJcXG4gICAgICAgIDxzdHJvbmc+e3sgc2VsZWN0ZWQuZGF0ZSB8IGRhdGU6IFxcJ2RkXFwnIH19PC9zdHJvbmc+XFxyXFxuICAgICAgICA8YSBuZy1jbGljaz1cXFwiZGlzcGxheVllYXJTZWxlY3Rpb24oKVxcXCI+e3sgc2VsZWN0ZWQuZGF0ZSB8IGRhdGU6IFxcJ3l5eXlcXCcgfX08L2E+XFxyXFxuICAgICAgPC9tZC10b29sYmFyPlxcclxcblxcclxcbiAgICAgIDwhLS0gQ2FsZW5kYXIgLS0+XFxyXFxuICAgICAgPGRpdiBjbGFzcz1cXFwibWRjLWRhdGUtcGlja2VyX19jYWxlbmRhclxcXCIgbmctaWY9XFxcIiF5ZWFyU2VsZWN0aW9uXFxcIj5cXHJcXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcIm1kYy1kYXRlLXBpY2tlcl9fbmF2XFxcIj5cXHJcXG4gICAgICAgICAgPG1kLWJ1dHRvbiBjbGFzcz1cXFwibWQtZmFiIG1kLXByaW1hcnlcXFwiIGFyaWEtbGFiZWw9XFxcIlByZXZpb3VzIG1vbnRoXFxcIiBuZy1jbGljaz1cXFwicHJldmlvdXNNb250aCgpXFxcIj5cXHJcXG4gICAgICAgICAgICA8aSBjbGFzcz1cXFwibWRpIG1kaS1jaGV2cm9uLWxlZnRcXFwiPjwvaT5cXHJcXG4gICAgICAgICAgPC9tZC1idXR0b24+XFxyXFxuXFxyXFxuICAgICAgICAgIDxzcGFuPnt7IGFjdGl2ZURhdGUgfCBkYXRlOiBcXCdNTU1NIHl5eXlcXCcgfX08L3NwYW4+XFxyXFxuXFxyXFxuICAgICAgICAgIDxtZC1idXR0b24gY2xhc3M9XFxcIm1kLWZhYiBtZC1wcmltYXJ5XFxcIiBhcmlhLWxhYmVsPVxcXCJOZXh0IG1vbnRoXFxcIiBuZy1jbGljaz1cXFwibmV4dE1vbnRoKClcXFwiPlxcclxcbiAgICAgICAgICAgIDxpIGNsYXNzPVxcXCJtZGkgbWRpLWNoZXZyb24tcmlnaHRcXFwiPjwvaT5cXHJcXG4gICAgICAgICAgPC9tZC1idXR0b24+XFxyXFxuICAgICAgICA8L2Rpdj5cXHJcXG5cXHJcXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcIm1kYy1kYXRlLXBpY2tlcl9fZGF5cy1vZi13ZWVrXFxcIj5cXHJcXG4gICAgICAgICAgPHNwYW4gbmctcmVwZWF0PVxcXCJkYXkgaW4gZGF5c09mV2Vla1xcXCI+e3sgZGF5IH19PC9zcGFuPlxcclxcbiAgICAgICAgPC9kaXY+XFxyXFxuXFxyXFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJtZGMtZGF0ZS1waWNrZXJfX2RheXNcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XFxcIm1kYy1kYXRlLXBpY2tlcl9fZGF5IG1kYy1kYXRlLXBpY2tlcl9fZGF5LS1pcy1lbXB0eVxcXCJcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5nLXJlcGVhdD1cXFwieCBpbiBlbXB0eUZpcnN0RGF5c1xcXCI+Jm5ic3A7PC9zcGFuPjwhLS1cXHJcXG5cXHJcXG4gICAgICAgICAgICAgICAgIC0tPjxkaXYgY2xhc3M9XFxcIm1kYy1kYXRlLXBpY2tlcl9fZGF5XFxcIlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICBuZy1jbGFzcz1cXFwieyBcXCdtZGMtZGF0ZS1waWNrZXJfX2RheS0taXMtc2VsZWN0ZWRcXCc6IGRheS5zZWxlY3RlZCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFwnbWRjLWRhdGUtcGlja2VyX19kYXktLWlzLXRvZGF5XFwnOiBkYXkudG9kYXkgfVxcXCJcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgbmctcmVwZWF0PVxcXCJkYXkgaW4gZGF5c1xcXCI+XFxyXFxuICAgICAgICAgIDxhIG5nLWNsaWNrPVxcXCJzZWxlY3QoZGF5KVxcXCI+e3sgZGF5LmRhdGUgPyAoZGF5LmRhdGUgfCBkYXRlOiBcXCdkZFxcJykgOiBcXCdcXCcgfX08L2E+XFxyXFxuICAgICAgICA8L2Rpdj48IS0tXFxyXFxuXFxyXFxuICAgICAgICAgICAgICAgICAtLT48c3BhbiBjbGFzcz1cXFwibWRjLWRhdGUtcGlja2VyX19kYXkgbWRjLWRhdGUtcGlja2VyX19kYXktLWlzLWVtcHR5XFxcIlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbmctcmVwZWF0PVxcXCJ4IGluIGVtcHR5TGFzdERheXNcXFwiPiZuYnNwOzwvc3Bhbj5cXHJcXG4gICAgICAgIDwvZGl2PlxcclxcbiAgICAgIDwvZGl2PlxcclxcblxcclxcbiAgICAgIDwhLS0gWWVhciBzZWxlY3Rpb24gLS0+XFxyXFxuICAgICAgPGRpdiBjbGFzcz1cXFwibWRjLWRhdGUtcGlja2VyX195ZWFyLXNlbGVjdG9yXFxcIiBuZy1zaG93PVxcXCJ5ZWFyU2VsZWN0aW9uXFxcIj5cXHJcXG4gICAgICAgIDxhIGNsYXNzPVxcXCJtZGMtZGF0ZS1waWNrZXJfX3llYXJcXFwiXFxyXFxuICAgICAgICAgICBuZy1jbGFzcz1cXFwieyBcXCdtZGMtZGF0ZS1waWNrZXJfX3llYXItLWlzLWFjdGl2ZVxcJzogeWVhciA9PSBhY3RpdmVEYXRlLmZvcm1hdChcXCdZWVlZXFwnKSB9XFxcIlxcclxcbiAgICAgICAgICAgbmctcmVwZWF0PVxcXCJ5ZWFyIGluIHllYXJzXFxcIlxcclxcbiAgICAgICAgICAgbmctY2xpY2s9XFxcInNlbGVjdFllYXIoeWVhcilcXFwiXFxyXFxuICAgICAgICAgICBuZy1pZj1cXFwieWVhclNlbGVjdGlvblxcXCI+XFxyXFxuICAgICAgICAgIDxzcGFuPnt7eWVhcn19PC9zcGFuPlxcclxcbiAgICAgICAgPC9hPlxcclxcbiAgICAgIDwvZGl2PlxcclxcblxcclxcbiAgICAgIDwhLS0gQWN0aW9ucyAtLT5cXHJcXG4gICAgICA8ZGl2IGNsYXNzPVxcXCJtZC1hY3Rpb25zIG1kYy1kYXRlLXBpY2tlcl9fYWN0aW9uc1xcXCIgbGF5b3V0PVxcXCJyb3dcXFwiIGxheW91dC1hbGlnbj1cXFwiZW5kXFxcIj5cXHJcXG4gICAgICAgIDxtZC1idXR0b24gY2xhc3M9XFxcIm1kLXByaW1hcnlcXFwiIG5nLWNsaWNrPVxcXCJjYW5jZWwoKVxcXCI+Q2FuY2VsPC9tZC1idXR0b24+XFxyXFxuICAgICAgICA8bWQtYnV0dG9uIGNsYXNzPVxcXCJtZC1wcmltYXJ5XFxcIiBuZy1jbGljaz1cXFwiY2xvc2VQaWNrZXIoKVxcXCI+T2s8L21kLWJ1dHRvbj5cXHJcXG4gICAgICA8L2Rpdj5cXHJcXG4gICAgPC9kaXY+XFxyXFxuPC9tZC1kaWFsb2c+XFxyXFxuXCIpO1xuJHRlbXBsYXRlQ2FjaGUucHV0KFwiZGF0ZS1waWNrZXIvZGF0ZS1waWNrZXItaW5wdXQuaHRtbFwiLFwiPG1kLWlucHV0LWNvbnRhaW5lciBuZy1jbGljaz1cXFwib3BlblBpY2tlcigkZXZlbnQpXFxcIj5cXHJcXG4gIDxsYWJlbD57e2xhYmVsfX08L2xhYmVsPlxcclxcbiAgPGlucHV0IHR5cGU9XFxcInRleHRcXFwiIG5nLW1vZGVsPVxcXCJzZWxlY3RlZC5tb2RlbFxcXCIgbmctZGlzYWJsZWQ9XFxcInRydWVcXFwiIG5nLWNsaWNrPVxcXCJvcGVuUGlja2VyKCRldmVudClcXFwiPlxcclxcbjwvbWQtaW5wdXQtY29udGFpbmVyPlxcclxcblwiKTt9XSk7IiwiLyogZ2xvYmFsIGFuZ3VsYXIgKi9cclxuLyogZ2xvYmFsIG1vbWVudCAqL1xyXG4vKiBnbG9iYWwgbmF2aWdhdG9yICovXHJcbid1c2Ugc3RyaWN0JzsgLy8ganNoaW50IGlnbm9yZTpsaW5lXHJcblxyXG5cclxuYW5ndWxhci5tb2R1bGUoJ25nTWF0ZXJpYWwuY29tcG9uZW50cy5kYXRlUGlja2VyJywgWyduZ01hdGVyaWFsJ10pXHJcbi5jb250cm9sbGVyKCdtZGNEYXRlUGlja2VyQ29udHJvbGxlcicsIFsnJHNjb3BlJywnJHRpbWVvdXQnLCckbWREaWFsb2cnLCckZmlsdGVyJywnJGRvY3VtZW50JywnJGxvY2FsZScsJ2RhdGUnLCdsb2NhbGUnLCdtZFRoZW1lJyxcclxuICAgIGZ1bmN0aW9uICgkc2NvcGUsICR0aW1lb3V0LCAkbWREaWFsb2csICRmaWx0ZXIsICRkb2N1bWVudCwgJGxvY2FsZSwgZGF0ZSwgbG9jYWxlLCBtZFRoZW1lKSB7XHJcbiAgICAgICAgZnVuY3Rpb24gY2hlY2tMb2NhbGUobG9jYWxlKSB7XHJcbiAgICAgICAgICBpZiAoIWxvY2FsZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gKG5hdmlnYXRvci5sYW5ndWFnZSAhPT0gbnVsbCA/IG5hdmlnYXRvci5sYW5ndWFnZSA6IG5hdmlnYXRvci5icm93c2VyTGFuZ3VhZ2UpLnNwbGl0KCdfJylbMF0uc3BsaXQoJy0nKVswXSB8fCAnZW4nO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIGxvY2FsZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgJHNjb3BlLm15TG9jYWxlID0gJGxvY2FsZTtcclxuXHJcbiAgICAgICAgJHNjb3BlLm1vZGVsID0gZGF0ZTtcclxuXHJcbiAgICAgICAgJHNjb3BlLm1kVGhlbWUgPSBtZFRoZW1lID8gbWRUaGVtZSA6ICdkZWZhdWx0JztcclxuXHJcbiAgICAgICAgdmFyIGFjdGl2ZUxvY2FsZTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmFjdGl2ZURhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgIHRoaXMuYnVpbGQgPSBmdW5jdGlvbiAobG9jYWxlKSB7XHJcbiAgICAgICAgICAvL2FjdGl2ZUxvY2FsZSA9IGxvY2FsZTtcclxuXHJcbiAgICAgICAgICAvL21vbWVudC5sb2NhbGUoYWN0aXZlTG9jYWxlKTtcclxuXHJcbiAgICAgICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQoJHNjb3BlLm1vZGVsKSkge1xyXG4gICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWQgPSB7XHJcbiAgICAgICAgICAgICAgbW9kZWw6ICRzY29wZS5tb2RlbCwvL21vbWVudCgkc2NvcGUubW9kZWwpLFxyXG4gICAgICAgICAgICAgIGRhdGU6ICRzY29wZS5tb2RlbFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgJHNjb3BlLmFjdGl2ZURhdGUgPSAkc2NvcGUubW9kZWw7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkID0ge1xyXG4gICAgICAgICAgICAgIG1vZGVsOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgZGF0ZTogbmV3IERhdGUoKVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgJHNjb3BlLmFjdGl2ZURhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIC8vJHNjb3BlLm1vbWVudCA9IG1vbWVudDtcclxuXHJcbiAgICAgICAgICAkc2NvcGUuZGF5cyA9IFtdO1xyXG4gICAgICAgICAgLy9UT0RPOiBVc2UgbW9tZW50IGxvY2FsZSB0byBzZXQgZmlyc3QgZGF5IG9mIHdlZWsgcHJvcGVybHkuXHJcblxyXG4gICAgICAgICAgJHNjb3BlLmRheXNPZldlZWsgPSBbJHNjb3BlLm15TG9jYWxlLkRBVEVUSU1FX0ZPUk1BVFMuU0hPUlREQVlbMF0sXHJcbiAgICAgICAgICAgICRzY29wZS5teUxvY2FsZS5EQVRFVElNRV9GT1JNQVRTLlNIT1JUREFZWzFdLFxyXG4gICAgICAgICAgICAkc2NvcGUubXlMb2NhbGUuREFURVRJTUVfRk9STUFUUy5TSE9SVERBWVsyXSxcclxuICAgICAgICAgICAgJHNjb3BlLm15TG9jYWxlLkRBVEVUSU1FX0ZPUk1BVFMuU0hPUlREQVlbM10sXHJcbiAgICAgICAgICAgICRzY29wZS5teUxvY2FsZS5EQVRFVElNRV9GT1JNQVRTLlNIT1JUREFZWzRdLFxyXG4gICAgICAgICAgICAkc2NvcGUubXlMb2NhbGUuREFURVRJTUVfRk9STUFUUy5TSE9SVERBWVs1XSxcclxuICAgICAgICAgICAgJHNjb3BlLm15TG9jYWxlLkRBVEVUSU1FX0ZPUk1BVFMuU0hPUlREQVlbNl1dO1xyXG5cclxuICAgICAgICAgICRzY29wZS55ZWFycyA9IFtdO1xyXG5cclxuICAgICAgICAgIGZvciAodmFyIHkgPSAkc2NvcGUuYWN0aXZlRGF0ZS5nZXRGdWxsWWVhcigpIC0gNTA7IHkgPD0gJHNjb3BlLmFjdGl2ZURhdGUuZ2V0RnVsbFllYXIoKSArIDUwOyB5KyspIHtcclxuICAgICAgICAgICAgJHNjb3BlLnllYXJzLnB1c2goeSk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgZ2VuZXJhdGVDYWxlbmRhcigpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5idWlsZChjaGVja0xvY2FsZShsb2NhbGUpKTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnByZXZpb3VzTW9udGggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAkc2NvcGUuYWN0aXZlRGF0ZSA9IG5ldyBEYXRlKCRzY29wZS5hY3RpdmVEYXRlLnNldE1vbnRoKCRzY29wZS5hY3RpdmVEYXRlLmdldE1vbnRoKCktMSkpOy8vJHNjb3BlLmFjdGl2ZURhdGUuc3VidHJhY3QoMSwgJ21vbnRoJyk7XHJcbiAgICAgICAgICBnZW5lcmF0ZUNhbGVuZGFyKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLm5leHRNb250aCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICRzY29wZS5hY3RpdmVEYXRlID0gbmV3IERhdGUoJHNjb3BlLmFjdGl2ZURhdGUuc2V0TW9udGgoJHNjb3BlLmFjdGl2ZURhdGUuZ2V0TW9udGgoKSsxKSk7Ly8kc2NvcGUuYWN0aXZlRGF0ZS5hZGQoMSwgJ21vbnRoJyk7XHJcbiAgICAgICAgICBnZW5lcmF0ZUNhbGVuZGFyKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnNlbGVjdCA9IGZ1bmN0aW9uIChkYXkpIHtcclxuICAgICAgICAgICRzY29wZS5zZWxlY3RlZCA9IHtcclxuICAgICAgICAgICAgbW9kZWw6IGRheS5kYXRlLFxyXG4gICAgICAgICAgICBkYXRlOiBkYXkuZGF0ZVxyXG4gICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAkc2NvcGUubW9kZWwgPSBkYXkuZGF0ZTtcclxuXHJcbiAgICAgICAgICBnZW5lcmF0ZUNhbGVuZGFyKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnNlbGVjdFllYXIgPSBmdW5jdGlvbiAoeWVhcikge1xyXG4gICAgICAgICAgJHNjb3BlLnllYXJTZWxlY3Rpb24gPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWQubW9kZWwgPSAkc2NvcGUuc2VsZWN0ZWQuZGF0ZS5zZXRGdWxsWWVhcih5ZWFyKTsvLyBtb21lbnQoJHNjb3BlLnNlbGVjdGVkLmRhdGUpLnllYXIoeWVhcikudG9EYXRlKCk7XHJcbiAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWQuZGF0ZSA9ICAkc2NvcGUuc2VsZWN0ZWQuZGF0ZS5zZXRGdWxsWWVhcih5ZWFyKTsvL21vbWVudCgkc2NvcGUuc2VsZWN0ZWQuZGF0ZSkueWVhcih5ZWFyKS50b0RhdGUoKTtcclxuICAgICAgICAgICRzY29wZS5tb2RlbCA9ICRzY29wZS5tb2RlbDsvLyBtb21lbnQoJHNjb3BlLnNlbGVjdGVkLmRhdGUpLnRvRGF0ZSgpO1xyXG4gICAgICAgICAgJHNjb3BlLmFjdGl2ZURhdGUuc2V0RnVsbFllYXIoeWVhcik7Ly8gPSAkc2NvcGUuYWN0aXZlRGF0ZS5hZGQoeWVhciAtICRzY29wZS5hY3RpdmVEYXRlLnllYXIoKSwgJ3llYXInKTtcclxuXHJcbiAgICAgICAgICBnZW5lcmF0ZUNhbGVuZGFyKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAkc2NvcGUuZGlzcGxheVllYXJTZWxlY3Rpb24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICB2YXIgY2FsZW5kYXJIZWlnaHQgPSAkZG9jdW1lbnRbMF0uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbWRjLWRhdGUtcGlja2VyX19jYWxlbmRhcicpWzBdLm9mZnNldEhlaWdodDtcclxuICAgICAgICAgIHZhciB5ZWFyU2VsZWN0b3JFbGVtZW50ID0gJGRvY3VtZW50WzBdLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ21kYy1kYXRlLXBpY2tlcl9feWVhci1zZWxlY3RvcicpWzBdO1xyXG4gICAgICAgICAgeWVhclNlbGVjdG9yRWxlbWVudC5zdHlsZS5oZWlnaHQgPSBjYWxlbmRhckhlaWdodCArICdweCc7XHJcblxyXG4gICAgICAgICAgJHNjb3BlLnllYXJTZWxlY3Rpb24gPSB0cnVlO1xyXG5cclxuICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGFjdGl2ZVllYXJFbGVtZW50ID0gJGRvY3VtZW50WzBdLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ21kYy1kYXRlLXBpY2tlcl9feWVhci0taXMtYWN0aXZlJylbMF07XHJcbiAgICAgICAgICAgIHllYXJTZWxlY3RvckVsZW1lbnQuc2Nyb2xsVG9wID0geWVhclNlbGVjdG9yRWxlbWVudC5zY3JvbGxUb3AgKyBhY3RpdmVZZWFyRWxlbWVudC5vZmZzZXRUb3AgLSB5ZWFyU2VsZWN0b3JFbGVtZW50Lm9mZnNldEhlaWdodCAvIDIgKyBhY3RpdmVZZWFyRWxlbWVudC5vZmZzZXRIZWlnaHQgLyAyO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2VuZXJhdGVDYWxlbmRhcigpIHtcclxuICAgICAgICAgIHZhciBkYXlzID0gW10sXHJcbiAgICAgICAgICAgIC8vcHJldmlvdXNEYXkgPSBuZXcgRGF0ZSgkc2NvcGUuYWN0aXZlRGF0ZS5nZXRGdWxsWWVhcigpLCAkc2NvcGUuYWN0aXZlRGF0ZS5nZXRNb250aCgpLCAwKSwvL2FuZ3VsYXIuY29weSgkc2NvcGUuYWN0aXZlRGF0ZSkuZGF0ZSgwKSxcclxuICAgICAgICAgICAgZmlyc3REYXlPZk1vbnRoID0gbmV3IERhdGUoJHNjb3BlLmFjdGl2ZURhdGUuZ2V0RnVsbFllYXIoKSwgJHNjb3BlLmFjdGl2ZURhdGUuZ2V0TW9udGgoKSwgMSksLy9hbmd1bGFyLmNvcHkoJHNjb3BlLmFjdGl2ZURhdGUpLmRhdGUoMSksXHJcbiAgICAgICAgICAgIGxhc3REYXlPZk1vbnRoID0gIG5ldyBEYXRlKCRzY29wZS5hY3RpdmVEYXRlLmdldEZ1bGxZZWFyKCksICRzY29wZS5hY3RpdmVEYXRlLmdldE1vbnRoKCkrMSwgMCksIC8vYW5ndWxhci5jb3B5KGZpcnN0RGF5T2ZNb250aCkuZW5kT2YoJ21vbnRoJyksXHJcbiAgICAgICAgICAgIG1heERheXMgPSBsYXN0RGF5T2ZNb250aC5nZXRVVENEYXRlKCk7Ly9hbmd1bGFyLmNvcHkobGFzdERheU9mTW9udGgpLmRhdGUoKTtcclxuXHJcbiAgICAgICAgICAkc2NvcGUuZW1wdHlGaXJzdERheXMgPSBbXTtcclxuXHJcblxyXG4gICAgICAgICAgICAgIGZvciAodmFyIGkgPSBmaXJzdERheU9mTW9udGguZ2V0RGF5KCk7IGkgPiAwOyBpLS0pIHtcclxuICAgICAgICAgICAgICAgICAgJHNjb3BlLmVtcHR5Rmlyc3REYXlzLnB1c2goe30pO1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICB2YXIgZWFjaCA9IGZpcnN0RGF5T2ZNb250aDtcclxuICAgICAgICAgICAgdmFyIHRvZGF5ID0gbmV3IERhdGUoKTtcclxuICAgICAgICAgICAgdG9kYXkuc2V0SG91cnMoMCwgMCwgMCwgMCk7XHJcbiAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1heERheXM7IGorKykge1xyXG5cclxuICAgICAgICAgICAgdmFyIGRhdGUgPSB7fTtcclxuICAgICAgICAgICAgZGF0ZS5kYXRlID0gZWFjaDtcclxuICAgICAgICAgICAgLy9kYXRlID0gYW5ndWxhci5jb3B5KHByZXZpb3VzRGF5LmFkZCgxLCAnZGF5cycpKTtcclxuXHJcbiAgICAgICAgICAgIGRhdGUuc2VsZWN0ZWQgPSBlYWNoLmdldFRpbWUoKSA9PT0gJHNjb3BlLnNlbGVjdGVkLmRhdGUuZ2V0VGltZSgpOy8vYW5ndWxhci5pc0RlZmluZWQoJHNjb3BlLnNlbGVjdGVkLm1vZGVsKSAmJiBkYXRlLmlzU2FtZSgkc2NvcGUuc2VsZWN0ZWQuZGF0ZSwgJ2RheScpO1xyXG4gICAgICAgICAgICBkYXRlLnRvZGF5ID0gZWFjaC5nZXRUaW1lKCkgPT09IHRvZGF5LmdldFRpbWUoKTsvL2RhdGUuaXNTYW1lKG1vbWVudCgpLCAnZGF5Jyk7XHJcblxyXG4gICAgICAgICAgICBkYXlzLnB1c2goZGF0ZSk7XHJcbiAgICAgICAgICAgIGVhY2ggPSBuZXcgRGF0ZShlYWNoKTtcclxuICAgICAgICAgICAgZWFjaCA9IG5ldyBEYXRlKGVhY2guc2V0RGF0ZShlYWNoLmdldERhdGUoKSArIDEpKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAkc2NvcGUuZW1wdHlMYXN0RGF5cyA9IFtdO1xyXG4gICAgICAgICAgLy9pZihsYXN0RGF5T2ZNb250aC5nZXREYXkoKSA8IDcgKSB7XHJcbiAgICAgICAgICAgICAgZm9yICh2YXIgayA9IGxhc3REYXlPZk1vbnRoLmdldERheSgpKzE7IGsgPCA3IDsgaysrKSB7XHJcbiAgICAgICAgICAgICAgICAgICRzY29wZS5lbXB0eUxhc3REYXlzLnB1c2goe30pO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgIC8vfVxyXG4gICAgICAgICAgJHNjb3BlLmRheXMgPSBkYXlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgJG1kRGlhbG9nLmhpZGUoKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuY2xvc2VQaWNrZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAkbWREaWFsb2cuaGlkZSgkc2NvcGUuc2VsZWN0ZWQpO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbl0pXHJcbi5jb250cm9sbGVyKCdtZGNEYXRlUGlja2VySW5wdXRDb250cm9sbGVyJywgZnVuY3Rpb24gKCRzY29wZSwgJGF0dHJzLCAkdGltZW91dCwgJGZpbHRlciwgJG1kRGlhbG9nKSB7XHJcbiAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQoJHNjb3BlLm1vZGVsKSkge1xyXG4gICAgICAkc2NvcGUuc2VsZWN0ZWQgPSB7XHJcbiAgICAgICAgbW9kZWw6IG1vbWVudCgkc2NvcGUubW9kZWwpLFxyXG4gICAgICAgIGRhdGU6ICRzY29wZS5tb2RlbFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICRzY29wZS5zZWxlY3RlZCA9IHtcclxuICAgICAgICBtb2RlbDogdW5kZWZpbmVkLFxyXG4gICAgICAgIGRhdGU6IG5ldyBEYXRlKClcclxuICAgICAgfTtcclxuICAgIH1cclxuICAgIHZhciBkYXRhRGF0ZUZvcm1hdCA9ICdtZWRpdW1EYXRlJztcclxuICAgIGlmKGFuZ3VsYXIuaXNEZWZpbmVkKCRhdHRycy5kYXRhRGF0ZUZvcm1hdCkpXHJcbiAgICAgICAgZGF0YURhdGVGb3JtYXQgPSAkYXR0cnMuZGF0YURhdGVGb3JtYXQ7XHJcblxyXG4gICAgJHNjb3BlLm9wZW5QaWNrZXIgPSBmdW5jdGlvbiAoZXYpIHtcclxuICAgICAgJHNjb3BlLnllYXJTZWxlY3Rpb24gPSBmYWxzZTtcclxuXHJcbiAgICAgICRtZERpYWxvZy5zaG93KHtcclxuICAgICAgICB0YXJnZXRFdmVudDogZXYsXHJcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdkYXRlLXBpY2tlci9kYXRlLXBpY2tlci1kaWFsb2cuaHRtbCcsXHJcbiAgICAgICAgY29udHJvbGxlcjogJ21kY0RhdGVQaWNrZXJDb250cm9sbGVyJyxcclxuICAgICAgICBsb2NhbHM6IHtkYXRlOiAkc2NvcGUuc2VsZWN0ZWQuZGF0ZSwgbG9jYWxlOiAkYXR0cnMubG9jYWxlLCBtZFRoZW1lOiAkYXR0cnMuZGlhbG9nTWRUaGVtZX1cclxuICAgICAgfSkudGhlbihmdW5jdGlvbiAoc2VsZWN0ZWQpIHtcclxuICAgICAgICBpZiAoc2VsZWN0ZWQpIHtcclxuICAgICAgICAgICRzY29wZS5zZWxlY3RlZC5tb2RlbCA9ICRmaWx0ZXIoJ2RhdGUnKShzZWxlY3RlZC5kYXRlLCBkYXRhRGF0ZUZvcm1hdCk7XHJcbiAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWQuZGF0ZSA9IHNlbGVjdGVkLmRhdGU7XHJcbiAgICAgICAgICAkc2NvcGUubW9kZWwgPSBzZWxlY3RlZC5tb2RlbDtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfTtcclxuICB9KVxyXG4uZGlyZWN0aXZlKCdtZGNEYXRlUGlja2VyJywgZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgcmVzdHJpY3Q6ICdBRScsXHJcbiAgICAgIGNvbnRyb2xsZXI6ICdtZGNEYXRlUGlja2VySW5wdXRDb250cm9sbGVyJyxcclxuICAgICAgc2NvcGU6IHtcclxuICAgICAgICBtb2RlbDogJz0nLFxyXG4gICAgICAgIGxhYmVsOiAnQCdcclxuICAgICAgfSxcclxuICAgICAgdGVtcGxhdGVVcmw6ICdkYXRlLXBpY2tlci9kYXRlLXBpY2tlci1pbnB1dC5odG1sJ1xyXG4gICAgfTtcclxuICB9KTtcclxuIiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxuYW5ndWxhci5tb2R1bGUoJ25nTWF0ZXJpYWwuY29tcG9uZW50cycsIFtcclxuICAnbmdNYXRlcmlhbCcsXHJcbiAgJ25nTWF0ZXJpYWwuY29tcG9uZW50cy50ZW1wbGF0ZXMnLFxyXG4gICduZ01hdGVyaWFsLmNvbXBvbmVudHMuZGF0ZVBpY2tlcidcclxuXSk7XHJcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==